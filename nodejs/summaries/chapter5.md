# ì„¹ì…˜5. ìµìŠ¤í”„ë ˆìŠ¤ ì›¹ ì„œë²„ ë§Œë“¤ê¸°

ì§„í–‰ìƒíƒœ: ì§„í–‰ì¤‘
ê¸°ê°„: August 6, 2023

<aside>
ğŸ’¡ npm íŠ¸ë Œë“œ í™•ì¸í•˜ê¸° : [https://npmtrends.com/](https://npmtrends.com/)
- ë‹¤ìš´ë¡œë“œ ìˆ˜ ë§ì€ íŒ¨í‚¤ì§€ good
- ìµœê·¼ì—ë„ updateëœ ê¸°ë¡ì´ ìˆëŠ” íŒ¨í‚¤ì§€ good

</aside>

## express

- http ëª¨ë“ˆë¡œ ì›¹ ì„œë²„ë¥¼ ë§Œë“¤ë©´ ê°€ë…ì„± ë° í™•ì¥ì„±ì´ ë–¨ì–´ì§„ë‹¤.
- expressì™€ ê°™ì€ í”„ë ˆì„ì›Œí¬ë¥¼ í†µí•´ ì½”ë“œ ê´€ë¦¬ ë° í¸ì˜ì„±ì´ ì¢‹ì•„ì§„ë‹¤.
- expressëŠ” ë‚´ë¶€ì ìœ¼ë¡œ http ì„œë²„ë¥¼ ì‚¬ìš©í•˜ê³  ìˆê¸°ë•Œë¬¸ì— ì‚¬ì‹¤ìƒ httpë¥¼ ì“°ëŠ” ê²ƒê³¼ ë™ì¼í•˜ë‹¤.
- example
    
    ```jsx
    // app.js
    const express = require("express");
    
    const app = express();
    
    // ì„œë²„ì˜ portë¼ëŠ” ì†ì„±ì— 3000ì„ ë„£ëŠ”ë‹¤.
    app.set("port", process.env.PORT || 3000);
    
    app.get("/", (req, res) => {
      res.send("hello express");
    });
    
    app.listen(app.get("port"), () => {
      console.log("ìµìŠ¤í”„ë ˆìŠ¤ ì„œë²„ ì‹¤í–‰");
    });
    ```
    
    - ë§Œë“¤ì–´ì§€ì§€ ì•Šì€ URIë¥¼ í†µí•´ ìš”ì²­í–ˆì„ ê²½ìš° ì•Œì•„ì„œ 404 ì½”ë“œë¥¼ ë³´ë‚´ì¤€ë‹¤.
    - ì„œë²„ì—ì„œ ì—ëŸ¬ ë°œìƒ ì‹œ ì•Œì•„ì„œ 500 ì½”ë“œë¥¼ ë³´ë‚´ì¤€ë‹¤.
        
        ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-08-08 á„‹á…©á„’á…® 10.27.39.png](%E1%84%89%E1%85%A6%E1%86%A8%E1%84%89%E1%85%A7%E1%86%AB5%20%E1%84%8B%E1%85%B5%E1%86%A8%E1%84%89%E1%85%B3%E1%84%91%E1%85%B3%E1%84%85%E1%85%A6%E1%84%89%E1%85%B3%20%E1%84%8B%E1%85%B0%E1%86%B8%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%A5%20%E1%84%86%E1%85%A1%E1%86%AB%E1%84%83%E1%85%B3%E1%86%AF%E1%84%80%E1%85%B5%20d751505752a84439923472277cc22667/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-08-08_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_10.27.39.png)
        
    
    ```jsx
    // package.js
    {
      "name": "my-express",
      "version": "1.0.0",
      "description": "",
      "main": "index.js",
      "scripts": {
        "start": "nodemon app"
      },
      "author": "",
      "license": "ISC",
      "dependencies": {
        "express": "^4.18.2"
      },
      "devDependencies": {
        "nodemon": "^3.0.1"
      }
    }
    ```
    
    - nodemon â†’ íŒŒì¼ì´ ìˆ˜ì •ë˜ë©´ ì•Œì•„ì„œ ì„œë²„ë¥¼ ì¬ì‹¤í–‰ì‹œì¼œì¤€ë‹¤.
        
        ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-08-08 á„‹á…©á„’á…® 10.29.16.png](%E1%84%89%E1%85%A6%E1%86%A8%E1%84%89%E1%85%A7%E1%86%AB5%20%E1%84%8B%E1%85%B5%E1%86%A8%E1%84%89%E1%85%B3%E1%84%91%E1%85%B3%E1%84%85%E1%85%A6%E1%84%89%E1%85%B3%20%E1%84%8B%E1%85%B0%E1%86%B8%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%A5%20%E1%84%86%E1%85%A1%E1%86%AB%E1%84%83%E1%85%B3%E1%86%AF%E1%84%80%E1%85%B5%20d751505752a84439923472277cc22667/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-08-08_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_10.29.16.png)
        

## expressë¡œ HTML ì„œë¹™í•˜ê¸°

<aside>
ğŸ’¡ ë°±ì—”ë“œ ê°œë°œìë¡œì„œ ìŒ“ì•„ë‘¬ì•¼í•  ë•ëª©
- HTTP, ìš´ì˜ì²´ì œ, ë°ì´í„°ë² ì´ìŠ¤, ë„¤íŠ¸ì›Œí¬

</aside>

- í˜„ì¬ í”„ë¡œì íŠ¸ì— íŠ¹ì • íŒ¨í‚¤ì§€ ì„¤ì¹˜ ì—¬ë¶€ í™•ì¸
    
    ```jsx
    npm ls express
    npm ll express
    npm list express
    ```
    
    ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-08-08 á„‹á…©á„’á…® 11.18.56.png](%E1%84%89%E1%85%A6%E1%86%A8%E1%84%89%E1%85%A7%E1%86%AB5%20%E1%84%8B%E1%85%B5%E1%86%A8%E1%84%89%E1%85%B3%E1%84%91%E1%85%B3%E1%84%85%E1%85%A6%E1%84%89%E1%85%B3%20%E1%84%8B%E1%85%B0%E1%86%B8%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%A5%20%E1%84%86%E1%85%A1%E1%86%AB%E1%84%83%E1%85%B3%E1%86%AF%E1%84%80%E1%85%B5%20d751505752a84439923472277cc22667/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-08-08_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_11.18.56.png)
    
- example : html íŒŒì¼ ë³´ë‚´ê¸°
    
    ```jsx
    app.get("/", (req, res) => {
      res.sendFile(path.join(__dirname, "index.html"));
    });
    ```
    
    ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-08-08 á„‹á…©á„’á…® 11.25.31.png](%E1%84%89%E1%85%A6%E1%86%A8%E1%84%89%E1%85%A7%E1%86%AB5%20%E1%84%8B%E1%85%B5%E1%86%A8%E1%84%89%E1%85%B3%E1%84%91%E1%85%B3%E1%84%85%E1%85%A6%E1%84%89%E1%85%B3%20%E1%84%8B%E1%85%B0%E1%86%B8%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%A5%20%E1%84%86%E1%85%A1%E1%86%AB%E1%84%83%E1%85%B3%E1%86%AF%E1%84%80%E1%85%B5%20d751505752a84439923472277cc22667/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-08-08_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_11.25.31.png)
    

## ë¯¸ë“¤ì›¨ì–´ ì‚¬ìš©í•˜ê¸°

<aside>
ğŸ’¡ ë¼ìš°í„° = ë©”ì†Œë“œì™€ ì£¼ì†Œê°€ ìˆë‹¤

</aside>

- ëª¨ë“  ìš”ì²­ì— ì‹¤í–‰ëœë‹¤.
- ì¤‘ë³µë˜ëŠ” ì½”ë“œê°€ ë°œìƒí•  ê²½ìš° ë¯¸ë“¤ì›¨ì–´ë¥¼ í™œìš©í•  ìˆ˜ ìˆë‹¤.
- next()ë¥¼ í•´ì¤˜ì•¼ë§Œ ë‹¤ìŒ ë¼ìš°í„°ë¡œ ë„˜ì–´ê°„ë‹¤.
    
    ```jsx
    app.use((req, res, next) => {
      console.log("ëª¨ë“  ìš”ì²­ì— ì‹¤í–‰í•œë‹¤");
      next();
    });
    ```
    
- ì™€ì¼ë“œ ì¹´ë“œ(:)
    - ì™€ì¼ë“œ ì¹´ë“œë¥¼ ì‚¬ìš©í•˜ë©´ ì£¼ì†Œë¥¼ í†µí•´ ìš”ì²­ëœ ë°ì´í„°ë¥¼ ëª¨ë‘ ë°›ì„ ìˆ˜ ìˆë‹¤
        
        ```jsx
        app.get("/category/:name", (req, res) => {
          res.send(`hello wildcard`);
        });
        ```
        
    - ì™€ì¼ë“œ ì¹´ë“œì™€ ë¹„ìŠ·í•œ ì£¼ì†Œë¥¼ ê°€ì§„ ë¼ìš°í„°ê°€ ìˆì„ ë•Œ,
        - ì½”ë“œëŠ” ìœ„â†’ì•„ë˜ë¡œ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— ì™€ì¼ë“œ ì¹´ë“œê°€ ë¨¼ì € ì •ì˜ëœ ê²½ìš° ë¨¼ì € í˜¸ì¶œëœë‹¤
        - ë”°ë¼ì„œ ì™€ì¼ë“œ ì¹´ë“œëŠ” í•­ìƒ ë‹¤ë¥¸ ë¼ìš°í„°ë“¤ë³´ë‹¤ ì•„ë˜ì— ìœ„ì¹˜í•´ì•¼í•œë‹¤.
        
        ```jsx
        app.get("/category/javascript", (req, res) => {
          res.send("hello javascript");
        });
        
        // ì™€ì¼ë“œ ì¹´ë“œ
        app.get("/category/:name", (req, res) => {
          res.send(`hello wildcard`);
        });
        ```
        
- ì• ìŠ¤í„°ë¦¬ìŠ¤í¬(*)
    - ëª¨ë“  ìš”ì²­ì— ëŒ€í•´ ì–´ë– í•œ ì£¼ì†Œë˜ì§€ ì²˜ë¦¬í•˜ê² ë‹¤
    - ë²”ìœ„ê°€ ë„“ê¸° ë•Œë¬¸ì— ì•„ë˜ì— ìœ„ì¹˜í•´ì•¼í•œë‹¤.
    
    ```jsx
    app.get("*", (req, res) => {
      console.log("ì• ìŠ¤í„°ë¦¬ìŠ¤í¬");
    });
    ```
    

## ë¯¸ë“¤ì›¨ì–´ íŠ¹ì„±

- ì›í•˜ëŠ” ì£¼ì†Œì— ëŒ€í•´ì„œë§Œ ì‹¤í–‰í•˜ê³  ì‹¶ë‹¤ë©´ ì•ì— ì£¼ì†Œë¥¼ ì‘ì„±í•˜ë©´ ëœë‹¤.
    
    ```jsx
    app.use("/about", (req, res, next) => {
      console.log("ëª¨ë“  ìš”ì²­ì— ì‹¤í–‰í•œë‹¤");
      next();     // ì´í›„ì— ì•„ë˜ì˜ /about í˜¸ì¶œ
    });
    
    app.get("/category/:name", (req, res) => {
      res.send(`hello wildcard`);
    });
    
    app.get("/about", (req, res) => {
      res.send("hello express");
    });
    
    // ëª¨ë“  ìš”ì²­ì— ì‹¤í–‰í•œë‹¤
    // hello express
    ```
    
- ì—¬ëŸ¬ ê°€ì§€ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì´ì–´ì„œ ì‘ì„±í•  ìˆ˜ ìˆë‹¤
    
    ```jsx
    app.use(
      (req, res, next) => {
        console.log("1 ëª¨ë“  ìš”ì²­ì— ì‹¤í–‰í•œë‹¤");
        next();
      },
      (req, res, next) => {
        console.log("2 ëª¨ë“  ìš”ì²­ì— ì‹¤í–‰í•œë‹¤");
        next();
      },
      (req, res, next) => {
        console.log("3 ëª¨ë“  ìš”ì²­ì— ì‹¤í–‰í•œë‹¤");
        next();
      }
    );
    ```
    
    ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-08-10 á„‹á…©á„’á…® 10.41.30.png](%E1%84%89%E1%85%A6%E1%86%A8%E1%84%89%E1%85%A7%E1%86%AB5%20%E1%84%8B%E1%85%B5%E1%86%A8%E1%84%89%E1%85%B3%E1%84%91%E1%85%B3%E1%84%85%E1%85%A6%E1%84%89%E1%85%B3%20%E1%84%8B%E1%85%B0%E1%86%B8%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%A5%20%E1%84%86%E1%85%A1%E1%86%AB%E1%84%83%E1%85%B3%E1%86%AF%E1%84%80%E1%85%B5%20d751505752a84439923472277cc22667/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-08-10_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_10.41.30.png)
    
- ì—ëŸ¬ì²˜ë¦¬
    - expressëŠ” ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•´ì¤€ë‹¤
    - ì—ëŸ¬ì²˜ë¦¬ë¥¼ ìœ„í•´ ë¯¸ë“¤ì›¨ì–´ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤.(ì•ˆê·¸ëŸ¬ë©´ ë°”ë¡œ í™”ë©´ìœ¼ë¡œ ì—ëŸ¬ê°€ ë³´ì—¬ì§)
    - ì—ëŸ¬ ë¯¸ë“¤ì›¨ì–´ì˜ ë§¤ê°œë³€ìˆ˜ëŠ” ë°˜ë“œì‹œ 4ê°œì—¬ì•¼í•œë‹¤! â‡’ íŠ¹íˆ, nextë¥¼ ë°˜ë“œì‹œ ë¶™ì—¬ë†”ì•¼í•œë‹¤!!
    
    ```jsx
    // ë§Œì•½ ìœ„ì—ì„œ ì •ì˜ëœ ë¼ìš°í„° ì¤‘ ì—†ë‹¤ë©´ ì—¬ê¸°ë¡œ ë„˜ì–´ì˜¤ê²Œëœë‹¤! (ì—ëŸ¬ ë¯¸ë“¤ì›¨ì–´ëŠ” ì•„ë‹˜)
    app.use((req, res) => {
      res.send("404!!!");
    });
    
    app.use((req, res) => {
    	try {
    		console.log(test);   // ì„ ì–¸ë˜ì§€ ì•Šì€ ë³€ìˆ˜ì´ê¸° ë•Œë¬¸ì— error ë°œìƒ
    	} catch(e) {
    		// ë§¤ê°œë³€ìˆ˜ê°€ ìˆê¸°ë•Œë¬¸ì— ì—ëŸ¬ ë¯¸ë“¤ì›¨ì–´ë¡œ ë„˜ì–´ê°„ë‹¤
    		// ë§¤ê°œë³€ìˆ˜ ì—†ëŠ” nextëŠ” ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ë¡œ ë„˜ì–´ê°„ë‹¤
    		next(e);
    	}
    })
    
    // ì—ëŸ¬ ë¯¸ë“¤ì›¨ì–´
    app.use((err, req, res, next) => {
      console.error(err);
      res.send("ì—ëŸ¬ ë°œìƒ");
    });
    ```
    
- html â†’ expressë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ì¶•ì•½ëœ ì½”ë“œ
    - ì„œë²„ì˜ statusëŠ” ì‚¬ì‹¤ìƒ ìˆ¨ê²¨ì ¸ ìˆë‹¤
        - ë§Œì•½ ê¸°ì¡´ì˜ response statusë¥¼ ê·¸ëŒ€ë¡œ ë³´ë‚´ë©´ í•´ì»¤ë“¤ì´ íŒŒì•…í•˜ê³  ìœ„í˜‘ì„ ê°€í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì˜¤ë¥˜ ë°œìƒ ì‹œ 404 statusë¡œ ëª¨ë‘ ë³´ë‚´ëŠ” ì¼€ì´ìŠ¤ë„ ìˆë‹¤.
        
        ```jsx
        res.status(200).send("hello express");
        ```
        
    - htmlì—ì„œ headerë¥¼ í†µí•´ ë³´ë‚´ì•¼í–ˆë˜ ë°ì´í„°ë¥¼ expressì—ì„œëŠ” ì•Œì•„ì„œ ë³´ë‚´ì¤€ë‹¤
        
        ```jsx
        // html
        res.writeHead(200, {'Content-type': 'text/plain'});
        res.end('ì‘ë‹µ ë³´ëƒ„');
        
        // express
        res.send('ì‘ë‹µ ë³´ëƒ„');
        ```
        
    - json response
        
        ```jsx
        // html
        res.writeHead(200, {'Content-Type': 'application/json'});
        res.end(JSON.stringify({hello: "hi"}));
        
        // express -> ì•Œì•„ì„œ contentTypeì„ ë„£ì–´ì¤€ë‹¤
        res.json({hello: 'hi'});
        ```
        
- í•œ requestì—ëŠ” í•œ responseë§Œ ë³´ë‚¸ë‹¤!
    
    ```jsx
    app.get("/", (req, res) => {
      res.sendFile(path.join(__dirname, "index.html"));
    
    	// ì´ë¯¸ í•œ ë²ˆì˜ responseë¥¼ ë³´ëƒˆì§€ë§Œ ì´í›„ì— ë‹¤ì‹œ ë³´ë‚´ê³  ìˆì–´ ì—ëŸ¬ ë°œìƒ!
      res.send();
    	res.json({ hello: "hyein" });
    	res.writeHead();
      res.render()
    
    	// ë§Œì•½ ì´ ë’¤ì— ë¡œê·¸ë¥¼ ì°ëŠ”ë‹¤ë©´? -> ì¶œë ¥ëœë‹¤! javascriptì´ê¸° ë•Œë¬¸ì— returnë¬¸ì´ ì—†ìœ¼ë©´ responseë§Œ ë³´ë‚´ê³  ì´í›„ì˜ ì½”ë“œë¥¼ ì‹¤í–‰ì‹œí‚¤ê¸° ë•Œë¬¸ì— ì •ìƒì ìœ¼ë¡œ ë¡œê·¸ê°€ ì°íŒë‹¤
    	console.log('ë¡œê·¸ê°€ ì°í˜€?')
    });
    ```
    
- next(â€routeâ€) - ê°™ì€ ë¼ìš°í„°ê°€ 2ê°œ ì´ìƒì¼ ê²½ìš°ì— í™œìš© ê°€ëŠ¥
    
    ```jsx
    app.get(
      "/",
      (req, res, next) => {
        res.sendFile(path.join(__dirname, "index.html"));
        next("route");  // ì•„ë˜ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‹¤í–‰í•˜ì§€ ì•Šê³  ë°”ë¡œ ë‹¤ìŒ ë™ì¼í•œ ë¯¸ë“¤ì›¨ì–´ë¡œ ë„˜ì–´ê°„ë‹¤!
      },
      (req, res) => {
        console.log("ì²˜ìŒ ë¼ìš°í„°");  // ì‹¤í–‰ì•ˆëŒ
      }
    );
    
    app.get("/", (req, res) => {
      console.log("ë‹¤ìŒ ë¼ìš°í„°");    // ì‹¤í–‰ë¨
    });
    ```
    
    ```jsx
    // ì¤‘ë³µì„ ì¤„ì¼ ë•Œ ì•„ë˜ì™€ ê°™ì´ í™œìš©í•  ìˆ˜ ìˆë‹¤
    app.get(
      "/",
      (req, res, next) => {
        res.sendFile(path.join(__dirname, "index.html"));
        if(true) {
    			next('route');
    		} else {
    			next();
    		}
      }
    );
    ```